# 概要

## 要件定義とは

明確に定まった形の`依頼事項(＝要件)`を`明確に定める`(＝定義する)こと

ソフトウェア開発における要件定義の意味は`外部仕様を検討と合意`

* 『要件』を日常的な言葉に置き換えると注文（オーダー）
    * 注文: 作ってほしい人が作る人に出す依頼事項（リクエスト）
* 「目玉焼きを作って」とリクエストする場合
    * その依頼に基づいて目玉焼きを作るなら、「その目玉焼き」が要件
    
![about_00](image/about_00.jpg)

## 要件の必要性

* 依頼主側の求めるもの、すなわち要求が、明確を定まった形で作る側の人に明確に伝えるため
* 依頼事項が明確に伝わらないと不利益が起こる

## 失敗事例

* 開発プロジェクトが失敗する理由の多くは要件定義の不備
    * 合意後に外部仕様が変更される
        * 要件定義に不備があるから、外部設計にも影響がある

### 要件定義の不備

要件定義に不備が生じる理由

* 要件定義に漏れや間違いがあった
* 要件定義後にユーザー企業側から変更依頼があった
* ビジネス環境が変わった
* そもそも要件件定義の内容が正確に共有されていなかった

## 要件定義の目的

* システムのステークホルダーに対してシステムが満たすべき`機能`や`品質`を`明確`に定義する
    * 要件定義が正しいかどうかは、最終的にはユーザー企業側が判断する

## 要件定義のゴールは『見積もり』

要件定義の暗黙的な大目的は、「開発工数を見積る」

* 要件定義は、開発工数を見積るレベルまで要件を定義できたら終了する
    * 例えば、ユースケース記述が完成してユースケース数から開発工数を見積もることができれば終了

## 合意後の変更は失敗する

* 合意後の仕様変更のリスクには、ウォーターフォール開発は無力
* 反復型開発であれば、イテレーション開発を繰り返すため仕様変更も次のイテレーション計画に盛り込めば良い
* 要件定義後にユーザーから変更依頼があるケースは、事前に対処することはほとんど不可能
* 行わなければならないような仕様変更はリスク分のバッファに入るものは仕様変更を行う
    * 開発をやらせるのであれば、できるだけ仕様を詰め込もうとする企業もある
    * 総額は基本的に一緒なので、同じ金額ならばたくさんの機能を作ってほしいと考えるため

## 要件の実現可能性

* 作る側の人が「これなら作れます」と言える注文でなければ、実現不可能な依頼
* 作ってほしい人が一方的に要求を述べるだけでは要件とは言えない
* 「これは無理です」という場合、それがどういう理由によるのかが裏側に存在する
    * 「作る人の実力が足りない」のであれば、それは依頼先を別の人にすれば実現できる
    * 現実的に無理」というような場合があれば、要求自体を改める必要がある
* 実現方法を検討する必要も出てくる
    * 予算を増やせば実現できるのか、増やすならどれくらい必要なのか、など
    * 作る人の話を聞かないと「無理なものは無理」という状態に留まってしまう

```text
作ってほしい人と作る人の間の合意事項
それが要件
つまり、発注側と受注側の間で合意した納品検収条件
```

これはいわゆる受託開発のプロジェクトに限らない

社内での内製であっても原則は同じ

```text
依頼した人ができあがったものに対して「これならOKです」
と言うために、「何がどうなればよいのか」ということを明確に定めたものが要件
```

## 要件は「必要な条件」

**これならOKだと納得するために必要な条件**

* 例: 自分1人で自分だけのために何かを作るとしても､この原則は適応される
    * 目玉焼きで「半熟トロトロでなければ納得できない」という場合
    * 「半熟トロトロである」というのがOKを出すための納得に必要な条件

```text
ソフトウェア開発に限らず、世の中のたいていの仕事には
そもそも「要件が存在する」
```

* 例: `部屋の掃除をしなさい`と親に言われた場合
    * 親が依頼主であり「部屋の掃除をしなさい」という注文がこちらに出されたことになる
    * そのとき、自分なりに頑張って掃除をして綺麗にしたつもりで「終わったよ」と言ってもだめ
        * 親がチェックをして「何でここが汚いままなの！？」と指摘されるようでは、残念だが「掃除ができた」とは認められない
    * つまり「掃除が出来たと納得するための条件」があるということ

## なぜ要件を定義する必要があるのか

* 「だったら先にちゃんと言っておいてよ」の防止
    * 求められたことを一生懸命やった後に後出しのダメ出しをされると不愉快
* 開発プロセスや包括的なドキュメント、計画は、まさにこれらのリスクを制御できるように抑え込むためのもの
    * リスクが発生した場合の追加工数を見積もり、その追加工数に見合った金額を契約金額にバッファとして上乗せする
    * 「仕様凍結後に仕様変更が発生した場合には追加料金をいただきます」といった条件を契約に入れておく
* この仕様変更リスクへの対応は、「仕様変更は起きはならないものである」という考え方
* システム開発会社はこのリスクを見積もって、その分を契約金額や契約条件に転化する
* 従来の大手システム開発会社の優秀なプロジェクトマネジャーは、このようなリスクを想定し、事前に対処できる人
* ただし、システム開発会社がどのようにガードを高くしようとも、仕様変更は起こる
* ドキュメントを記述することには、「こんなにきっちり検討した要件定義と設計なんだから、変更するのはやめようね」と
* 仕様変更に対するユーザーへの牽制の役割もある

## 納めるために必要な条件を先に提示する

* 先に提示して合意したうえでその仕事を行う
    * 納得も納品も「納める」と書く
    * 納めるために必要な条件を後出しにするのではなく、
* 日常的には言わなくても伝わる「はず」という仮説のもとにお互い仕事を依頼したりされたりしている
* その結果生じる困り事を事前に回避するための知恵、それが要件定義という作業

## 利用できる状態とは

後工程につなぐための要件定義

* デプロイ(配備)をする
    * その前に品質検査すなわちテストが必要
    * その前にプログラマの実装が必要
    * その前に`こういうソフトウェアを作る必要がある`という要件が必要
    * その要件を定めるのが要件定義
* 定まっていないものは作れない
* 作っていないものはテストできない
* テストできていないものはデプロイでできない
* 後工程から「これなら作れます」という納得を得られない要件は、「ちゃんとできました」とは言い難い
    * 自分自身が「これなら自分でも作れる」という確信を持てる要件定義をする
    * 「後工程に対する理解を深める」
* それは後工程を受け持つ人との連携によって、合意形成をしながら要件定義をしていく
    * これなら作れるかどうかということを後工程の担当の人と常に検討し合いながら進めていく
