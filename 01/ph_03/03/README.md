# バッチ設計

* バッチ
    * サーバープログラムのように常駐していない
    * ある時間がくるか、手動での起動によって実行されるプログラム
    * 負荷がかかるような処理を負荷が低い時間帯に実行する
        * 負荷がかかるような処理
            * 大量のDB操作
            * 大量のファイル操作
        * 負荷が低い時間帯
            * 夜間など
    * 決まった順番と時間帯に実行する

## バッチ設計での主な項目

* 実行タイミング
* 実行制御、ジョブ制御
* トランザクション
* リカバリー

## 難しい点

* パフォーマンス
    * 決められた時間帯の中で大量のデータを処理するため
    * DB処理はI/O処理がパフォーマンスのほとんどを決める
    * SQLの記述の仕方でパフォーマンスが大きく異なる
* 例外処理
* データベースを操作するバッチのトランザクションスコープ
    * パフォーマンスと例外処理に影響がある
    * トランザクションスコープがあまりに大きいと、全てがロールバックされてしまう
    * トランザクションスコープが小さすぎると、パフォーマンスが悪くなる

