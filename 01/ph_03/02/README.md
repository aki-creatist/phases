# 外部システムI/F設計

* 外部システムI/F
    * インターフェイス(Interface)の略
    * ネットワークやファイル交換により外部システムとデータを交換する部分
    * WebもHTTPプロトコルを使ったWebブラウザとのファイルシステムI/F
    * 外部システムI/Fを設計する上では、外部システムI/Fに依存した処理を共通化し、局所化する
        * 接続相手先の都合で変更される恐れがあるため
            * 局所化の例
                * ネットワークに接続するクラス
                * シーケンスを制御するクラス
                * 送受信データを読み書きするクラス
                * 例外処理を行うクラス

## 検討項目

* 接続先
* プロトコル・手段
* タイミング
* インターフェイス項目仕様
* 認証・セキュリティ
* 例外処理

## 順序の把握

* シーケンス図
    * 自システム/相手側システム間でどのようなやりとりが行われるのかを整理
    * 順序の整理
        * 処理が詰まった
        * 追い越しなどが行われてはならない箇所など

## 障害発生時などの例外処理

* 障害発生時などの例外処理をどうするか
    * 処理が中断すると、データを半分送信した状態でネットワーク接続が遮断される
    * ネットワークやファイル交換によるI/Fでは、DBのようなトランザクションの仕組みがない
    * 処理が中断せざるをえないことがある
        * ネットワークで通信中に回線がダウンした場合
        * ファイルの出力中にディスクフルになった場合
* 検討内容
    * 例外処理として単に処理を中断してログを記録すれば良いのか
    * それともシステムが自動的に再送するような機能を盛り込むのか
* メッセージキューのような仕組みが必要になる
    * メッセージキュー
        * アプリがメッセージ交換を行うとき一時的にメッセージを格納しておく場所
        * 再送の仕組み



