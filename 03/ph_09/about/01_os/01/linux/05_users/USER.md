# ユーザー操作

* 他のユーザーに切り替えるには、suコマンド
* ユーザーを作成するには、useraddコマンド
* パスワードを設定・変更するには、passwdコマンド
* ユーザーを削除するには、userdelコマンド

## ユーザーを作成してみよう

* `useradd` コマンド
    * ユーザーを作成できるのは、rootユーザーのみ

```bash
useradd ユーザー名
```

次の例では、aliceユーザーを作成

```bash
[student@cenos7 work]$ su -
パスワード：
最終ログイン： 2017/12/23 (水) 12:30:30 JST日時 pts/0
[root@centos7 ~]# useradd alice
# ユーザーが作成されたかどうかを確認
cat /etc/passwd | grep 'alice'
alice:x:1000:1000::/home/alice:/bin/sh
```

ホームディレクトリ以下にはユーザのホームが置かれている

```bash
ls /home
alice student teacher
```

### 作成したユーザーのパスワードを設定

* `passwd` コマンド
    * PASSWorD
* ユーザーを作成しただけでは、まだそのユーザーでログイン不可
* あらかじめパスワードを設定が必要

```bash
passwd [ユーザー名]
```

aliceユーザーのパスワードを設定

```bash
cd ~
password alice
ユーザー alice のパスワードを変更
# パスワードは２回入力
新しいパスワード：  ← 新しいパスワードを入力する
新しいパスワードを再入力してください： ← 新しいパスワードを再入力する
passwd: すべての認証トークンが正しく更新できました。
```

* パスワードに問題があると判定された場合は、メッセージが表示される
    * 無視して設定することも可能
    * できれば堅固(けんご)なパスワードに入力し直した方が良い
        * 8文字以上で、大文字、小文字、数字、記号を混ぜたもの推奨
        * パスワードも大文字小文字が区別される
    
```text
よくないパスワード：あまりにも短すぎます。
よくないパスワード：前後のどちらから読んでも同じパスワードです。
よくないパスワード：単純/系統的すぎます。
よくないパスワード：辞書の単語に基づいています。
よくないパスワード：簡単すぎます。
```

### 自分のパスワードを変更

* ユーザー名の指定なしでpasswdコマンドを実行すると、自分自身のパスワードを変更可能
    * この操作は一般ユーザーでも可能
* rootユーザの状態で引数を省略するときは注意
    * 意図せずrootユーザーのパスワードを変更してしまう

次の例ではstudentユーザーが自らのパスワードを変更する

```bash
su - alice
passwd
現在のUNIXパスワード：　← 現在のパスワードを入力する
新しいパスワード：  ← 新しいパスワードを入力する
新しいパスワードを再入力してください： ← 新しいパスワードを再入力する
passwd: すべての認証トークンが正しく更新できました。
```

## ユーザーを削除

* `userdel` コマンド
    * USER DELete
    * `r` オプション
    * そのユーザーのホームディレクトリも一緒に削除する
    * -rオプションを指定せずに実行すると、ユーザのホームディレクトリは残る
    
```bash
userdel	[-r] ユーザー名
```

次の例では、ホームディレクトリ(/home/alice)も含めてaliceユーザーを削除

```bash
userdel -r alice
```

