# YUM

* YUMは、高度なパッケージ管理システム
    * パッケージとその情報が蓄積されたインターネット上のリポジトリを利用する
* `yum update` コマンド
    * システムにインストールされている全パッケージをまとめてアップデートする
* `yum check-update` コマンド
    * 適用可能なアップデートを確認する
* `yum install` コマンド
    * パッケージをインストールする
* `yum list` コマンド
    * インストール済みパッケージと利用可能なパッケージの一覧を表示する
* `yum info` コマンド
    * インストールされているパッケージや、リポジトリで提供されているパッケージについての情報を確認する
* `yum search` コマンド
    * リポジトリで提供されているパッケージを検索する
* `yum remove` コマンド
    * インストールしたパッケージを削除する

## 前提

* `rpm`
    * パッケージ管理を行う基本コマンド
    * 管理が大変
        * 管理者が手動で依存関係を解決しなければならない
        * パッケージファイルも管理者が一つ一つ用意する必要がある
* `yum`
    * `rpm`より高度なパッケージ管理を提供する仕組み
    * リポジトリを利用し、必要なパッケージをインターネット経由でインストール可能
        * リポジトリ: パッケージとその情報が蓄積されたインターネット上の倉庫
    * 依存関係も自動的に解決する
* リポジトリの設定は、`/etc/yum.repos.d` ディレクトリ以下の設定ファイルで記述されている
    * 新しいリポジトリを追加することで、YUMを使ってより多くのパッケージを扱うことができるようになる

Debian系ディストリビューションでは、YUMに相当する結合パッケージ管理システムとしてAPTを採用

もともとAPTの方が早くから利用されており、RPMベースで統合パッケージ管理ができる仕組みとしてYUMが開発された。

## RPMパッケージをYUMで管理する

* `yum` コマンド

```bash
yum	[-y] サブコマンド
```

| サブコマンド | 説明 |
|:----|:----|
| update | システム(または指定したパッケージ)をアップデートする |
| check-update | アップデートされるパッケージを一覧表示する |
| install | 指定したパッケージをインストールする |
| remove | 指定したパッケージをアンイントールする |
| list | パッケージを一覧表示する |
| info | 指定したパッケージの情報を表示する |
| serch | パッケージを検索する |

## サブコマンド

### システムをアップデート

* `yum update`
    * 全パッケージをまとめてアップデート
        * システムを構成するパッケージは日々バージョンアップし、新しいものが提供されている
    * rootユーザーで行う
* `-y` オプション
    * 途中で`y`と答えるのを省略する
* リポジトリ外からインストールしたソフトウェアについては個々にアップデートする必要がある

```bash
yum -y update
```

### 適用可能なアップデートを確認

* `yum check-update`
    * どのくらいのアップデートが必要なのかを調べる
    * システムのアップデートは定期的に行う必要がある
    * 通常は、自動的にアップデートを行うyum-cronなどの仕組みを使う

```bash
yum check-update
```

### パッケージをインストール

* `yum install`
    * パッケージをインストールする
* `-y` オプション
    * 途中で`y`と答えるのを省略する
* 依存パッケージがある場合、そのパッケージも必要に応じてインストールされる

```bash
#emacsパッケージをインストールする例
yum install emacs　#関連パッケージもインストールされる
```

### パッケージの一覧を表示

* `yum list`
    * パッケージの一覧を表示
    * インストール済みパッケージと利用可能なパッケージが表示される

```bash
yum list
```

### パッケージの情報を確認

* `yum info`
    * インストールされているパッケージ情報を確認する
    * リポジトリで提供されているパッケージ情報を確認する
        * インストールされていないパッケージの情報も表示できる
        
```bash
#emacsパッケージの情報を表示
yum info emacs
```

### パッケージを検索

* `yum search`
    * インストールすべきパッケージの名前を確認する
        * 利用したいパッケージの名称が不明確な場合
    * リポジトリで提供されているパッケージを検索する
        * パッケージがリポジトリに存在するかどうかを確認したい場合

```bash
#fire」というキーワードで検索
yum search fire
```

### パッケージをアンインストール

* `yum remove`
    * インストールしたパッケージを削除する

```bash
#emacsパッケージをアンインストール
yum remove emacs
```    

### RPMパッケージの検証

* ほとんどのRPMパッケージは配布元によって電子署名されている
    * パッケージが改ざんされていてもインストール前に検知できるようにするため
* yumコマンドを使って初めてインストールやアップデートするとき、メッセージが表示されることがある
    * パッケージを検証するためのデータ(GPGキー)をインポートしても良いかの確認
* `y`を入力して進める


