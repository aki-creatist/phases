# Linux

* LinuxはCUIでの操作が基本
* Linuxサーバーでは、キーボードからのコマンド入力で操作するのが一般的
    * マウス不要

## ユーザインターフェース

* 人とコンピュターとの接点
    * `UI` ＝ ユーザーインターフェース
    * GUIとCUIに区分される
    
## CUI/GUI

* GUI
    * Graphical User Interface
    * ウィンドウやアイコン、メニューを操作対象として、マウスを使って操作する
    * 現在、コンピューターで一般的
* CUI
    * Character-based User Interface
    * キーボードから命令を入力して操作する方式
    * 作業手順を人に伝えるのも楽

## ３種類のユーザ

* 管理者ユーザー
* システムユーザー
* 一般ユーザー

### 管理者ユーザー

* システムを管理する権限を持ったユーザーが管理者ユーザー
* 別称は以下
    * `スーパーユーザー`
    * `rootユーザー`
        * Linuxでは`root(ルート)`と言うユーザー名が使われるため
* Linuxシステム上であらゆる動作が可能
* システムを一気に破壊することすら可能であるため取扱注意
    * 管理者ユーザーでの作業は最小限にとどめる

### システムユーザー

* システムプログラムを実行するための専用アカウント

### 一般ユーザー

* Linuxシステムにログインして様々な作業を行うためのユーザー
    * 一般ユーザーは自分専用の場所を提供される
    * 制限の範囲内で自由にシステムを利用できる

## コマンドを使って操作する

### プロンプトを確認

端末を起動すると、１行目に次のようなメッセージが出ている

```bash
[student@centos7 work]$
```

* `student@centos7 work]$`の部分を`プロンプト`
    * `プロンプト`: (人に情報を)要求する」、「発言を促す」
* プロンプトは自動的に表示される
* ユーザーの入力待ちの状態

```bash
[ユーザー名@ホスト名 カレンドディレクトリ名]$
```

* `ホスト名`(host name): コンピューターにつけられた名前
* プロンプトの最後の文字は `$` か `#` のいずれか
    * `$`: 一般ユーザー
        * 管理者ユーザーではない
    * `#`: 管理者ユーザー

```bash
# 管理者ユーザの場合は以下のようなプロンプトになる
[root@centos7 ~]#
```

### ユーザを切り替える

* `su`
    * Substitute User の略
* 現在のユーザーから、他のユーザーに切り替える
* `exit`
    * 元のユーザに戻る
    * 元のユーザの状態で実行すると端末を終了する

```bash
[student@centos7 work]$ su [-] [ユーザー名]
パスワード： パスワード(password)を入力
```

### rootユーザに切り替える

* suコマンドのオプションとして `-` だけ指定
    * オプションに「-」を指定すると、切り替え先のユーザーとしてログインした状態になる
* `-` を付けない場合
    * ユーザがいるカレントディレクトリのまま管理者権限になれる
        * 通常はrootユーザーになった時点でのカレントディレクトリは/root
    * root権限のみが必要で、ディレクトリを移動したくない場合は`-`を無しが楽
    
```bash
# rootユーザに切り替え
su -
# 元のディレクトリのままrootユーザに切り替え
su
```

```
exit #rootユーザで作業したら元のユーザに戻る習慣を持つ頃
```

### 指定のユーザに切り替える

```bash
# 指定のユーザに切り替える
su - ユーザ名
# 環境によっては以下のコマンド
sudo su - ユーザ名
```

* カレンドディレクトリはそのユーザーのホームディレクトリになる
* `-` をつけなければ、カレントディレクトリは元のまま
    * カレントディレクトリを変えず、root権限を利用したいだけの場合は、「-」なしでsuコマンドを実行
* `su`コマンドを使ったroot作業を終えたら、最後は`exit`コマンドを使って終了

### rootから抜ける際の注意

* `root`ユーザから`su`コマンドで別ユーザにならないこと
    * rootユーザーから再びsuコマンドを使って元のユーザーに切り替えることもできる
    * これは悪手
    * 元のユーザーのシェルは待機状態となり、切り替え先のユーザーで新たなシェルが起動するため
