# FTPサーバ

## 主なFTPクライアント

* FFFTP
* SyberDuck

## FPTサーバ

* FTP
    * File Transfer Protocol
    * FTPはファイルを転送するプロトコル
    * FTPサーバーとFTPクライアントで構成される
    * ネットワーク経由でのファイル転送に使われる
        * 手元のパソコンからWebサーバーへとファイルを転送
            * HTMLファイルや画像、動画といったコンテンツ
        * Webサーバーから手元のパソコンへ
            * インターネット上で配布されているソフトウェアをダウンロード
    * 匿名FTPを使うと不特定多数にファイルを配布できる
    * FTP通信は暗号化されないので安全とはいえない
    * CentOSではFTPサーバーとしてvsftpdが利用できる
    * vsftpdは設定ファイル/etc/vsftpd/vsftpd.confで設定

## FTPサーバーとFTPクライアント

* FTPサーバー
    * ファイル転送を制御する
* FTPクライアント
    * 利用する側

## 種類

* Linux
    * 利用できるFTPサーバー
        * vsftpd
        * ProFTPD
        * Pure-FTPDなど
    * FTPクライアント
        * gFTP
* OS X
    * Cyberduckなど

## 不特定多数のダウンロードは匿名FTPで行う

### 背景

* FTPで、本来`FTPログイン可能`な条件
    * あらかじめFTPサーバー側にユーザーアカウントを用意
    * パスワードを正しく指定したユーザー
* 不特定多数にあらかじめユーザー名とパスワードを知らせるのは現実的ではない

### 匿名FTP(アノニマスFTP)とは

* 匿名FTP(アノニマスFTP)
    * ネット上で不特定多数にファイルを配布する際によく使われる仕組み
    * ユーザー名に「anonymous」、パスワードに任意のメールアドレスを指定するだけでFTPサーバーを利用できる仕組み
        * パスワードに指定するメールアドレスは、特に確認はされない
        * まったく存在しないメールアドレスであっても通ってしまう
        * `ファイルを配布する(ダウンロードさせる)用途にだけ`使う
        * Webブラウザーのアドレス欄が`ftp://〜`となっているときはFTPで接続している
* アノニマス
    * anonymous:「名無しさん」くらいの意味

## FTPは危険

* FTPというプロトコルは、ネットワーク上を流れるデータを暗号化しない
    * ユーザー名やパスワードも、アップロード/ダウンロードされるファイルの内容も、盗聴されれば筒抜け
* 最近ではインターネット上でFTPによるアップロードは減少
* FTP自体は安全ではない

## 安全なFTPの利用

* `SFTP`
    * `FTPS` + `SSH`
        * `FTPS`: `FTP over SSL` (`SSL` + `FTP`)
            * SSL: 安全なwebサービス
        * `SSH`: 安全な通信のためのプロトコル
* いずれも、暗号化通信などによって安全性を高める
* それぞれに対応したFTPクライアントソフトウェアが必要

## 主なFTPコマンド

| FTPコマンド | 説明 |
|:----|:----|
| ls | ファイル名一覧を表示する |
| cd | FTPサーバー側のカレントディレクトリを変更する |
| lcd | ローカル側のカレントディレクトリを変更する |
| pwd | FTPサーバー側のカレントディレクトリを表示する |
| lpwd | ローカル側のカレントディレクトリを表示する |
| mkdir ディレクトリ | ローカル側にディレクトリを作成する |
| get ファイル名 | 指定したファイルを１つダウンロードする |
| mget ファイル名 | 指定した複数のファイルをダウンロードする |
| quit | lftpを終了する |