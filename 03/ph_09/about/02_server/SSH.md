# SSHサーバ

## リモート接続

* リモート接続にはSSHを使用する
    * リモート接続: ネットワーク経由で別のホストにログイン
* `ssh` コマンド
    * SSHでリモートホストに接続する
* `scp` コマンド
    * SSHを使ってネットワーク経由でファイルをコピーする

## 概要

* サーバーは通常、遠く離れた場所にある
    * サーバールームやデータセンターなど
* `SSH`
    * Secure SHell
    * 安全にリモート接続するためのプロトコル
        * 通信経路が暗号化される
    * サーバーにネットワーク経由で接続し、ログインしたりファイルを転送したりする
* `リモート接続`
    * ネットワーク経由で別のホストにログインすること
* リモート接続には以前は、リモート接続にはtelnetが使われていた
    * telnetは通信が暗号化されない
    * 盗聴されると内容が筒抜けになってしまう
    * 通信内容を暗号化し、安全なクライアント・サーバー接続をする仕組みとしてSSHが使われるようになった
* Linuxでは、OpenSSHというオープンソースのSSHサーバー及びSSHクライアントが利用される

![SSHは暗号化される](./image/ssh_01.png)

## 接続ごとの確認

* 通信経路が暗号化されるだけでは万全ではない
    * PC内部のファイルの書き換えやDNSの汚染によって、偽のサーバーに接続を誘導されることもあるため
    * うっかりユーザー名とパスワードを入力してしまうと、その情報が偽サーバーに記録され、不正アクセスに悪用される
    * DNS: 汚染とは、DNSサーバーのキャッシュ(一時記録)情報を偽の情報で書き換える攻撃のこと
* SSH は接続ごとに以下のことを確認する
    * 正当なサーバーか
    * 本当に接続先サーバーが間違いではないのか

### フィンガープリント

* ①サーバーのフィンガープリント
* ②はOKであれば「yes」と入力
    * すると、サーバーから送られたきた「ホスト鍵」という情報が記録される
    * 以後は「既知のホスト」として扱われるようになる
    * この操作はサーバーへの初回接続時だけ行われる

![フィンガープリント](./image/finger_print.png)
