# 設計

# 概要

* プログラムの設計
    * 問題を分析
    * 必要な仕様や機能を検討
    * それを実現するための最良のアルゴリズムを採用できるよう検討
* 要件を満たす方法を検討する
    * 要件定義書や企画書で明らかになったニーズに応える
    * どういう機能が必要で、どんなプログラムを作ればいいのか
* 設計の中心になるのはアルゴリズム

## 事前準備

工程の入力と出力を確認する

* 設計の入力になる要件定義の成果物はどのようなものか
* 設計の期間と範囲はどこまでか
* 設計の出力である成果物はどのようなものか

# ゴール

* 設計書の作成

# 学習ゴール

* 様々な方法論も学んでそれぞれの主張、良さや適性を比較しながら客観性を身につける
* 複数の方法論(アプローチ)を使いこなす

# 意義

設計には意図があるはずで、その意図を伝えることが設計書の目的

## マーチン・ファウラーの設計論

* 進化的設計
    * システム開発の進捗に従って設計も進化していくというもの
    * これからはこの考え方が望ましい
* 計画的設計
    * 従来の設計方法で、設計した通りに実装するので、設計が変わることは基本的にないと考えるもの
    * 設計が変わってしまうことは失敗を意味していた

## ユーティリティクラス

* あるクラスが共通で使われるであろうことが容易に想像できる場合
* このようなクラスは、`最初からユーティリティクラスとして作成する`

## 最初に検討すべきこと

アーキテクチャはコンポーネントの構造や振る舞いをシステム全体の基本構造として設計するもの

明らかに必要なものはアーキテクチャとして設計すべき

* DB処理について先に決めるべき事柄
    * `DomainModelパターン`を使うのか
    * `TransactionScriptパターン`を使うのか

## 最低限必要なこと

* 設計の目的を正確に把握する
    * 目的不明で設計書を書き進めると開発プロジェクトを失敗させる
* 設計を行うために最低限必要なテクニックを知る
    * 設計範囲が広くても、肝となるポイントは限られる
* 正常なコミュニケーション
    * 曖昧な表現を避け、注意しなければならない箇所を明確にする
* `誰かのため`に設計する
    * 記述した設計書で正しくプログラミングできるように設計

## 必須知識

* データベース設計
* アーキテクチャ設計

## 設計の目的とは

* 要件定義の内容の実現方法の模索
* 外部仕様を明確にする
* 開発の関係者間で情報を共有する
* システムの品質を高める
* メンテナンスのために設計情報を残す 

### メンテナンスのために設計

* 機能の拡張や保守のためにメンテナンスする人への情報提供
    * システムが開発されると、ユーザー企業に引き渡される
    * ユーザー企業は運用を開始
        * 開発完了は運用の始まりに過ぎない
        * ユーザー企業にとっては運用こそが本番
    * 運用を開始すると、様々な不具合が発見される
        * 足りない機能
        * システムのバグ
    * 設計書が何も残っていなければ、機能拡張や保守開発を行う前にシステム分析をすることになる

## 手順

### 概要から詳細へ

* 目的を明確に
* 情報の関連を示す
* 情報の詳細化をする

論理的に要件を下記の順にブレイクダウンする

* 要件
    * 要件を実現するための基本設計
        * 基本設計を詳細化した詳細設計

設計書に記述する内容だけでも情報間の関連を明確にする


* 設計書を読む視点
    * 「この設計書に書かれていることは、どの要件を満たすものかな？」
    * 「この要件を実現するための機能はどれとどれだっけ？」

## 情報共有のための設計

* 設計の目的の一つは、開発プロジェクトにおける関係者での情報共有
* 情報共有もコミュニケーション
    * コミュニケーションがシステムの品質を高める
    * コミュニケーションは作業効率を上げる
    * コミュニケーションが下手な開発プロジェクトは失敗することが多い
        * 下手なチーム
            * 誰かが全員にメールしたとしても誰も返信しない
            * リアクションがないので、メールを見ているかどうかもわからない
            * コミュニケーション過多
                * 品質も作業効率も下がる
                * 何を決めるにも全員の意見を聞く
                * 些細な内容でも員をCCに入れてメールを投げたりする
    * 必要最低限では足りない
        * 情報量も相手も`少し多め`にするのがコミュニケーションのコツ

### 関係者に設計成果物や課題を開示する手段

* レビューなどの打ち合わせを行う
* メールで送付する
* 共有フォルダに置く

## パターン

* 優秀な人は設計のパターンというものを持っている
    * メモリを壊さないためのパターン
    * 処理順序の組み方のパターン
* 経験を積むことで設計パターンを身につける
