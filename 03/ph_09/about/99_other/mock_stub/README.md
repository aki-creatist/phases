# モックとスタブ

## 概要



## 選択の場面

* スタブを使い続ける選択かどうかの選択
* どこをスタブにするかについての選択

### モッキスト

* インターフェイスが依存する部分をできる限り多くスタブ、モック化することを好む人々のこと
* ふるまい駆動開発ではこのアプローチが一般的

### モッキストの手法
   
* 利点: 開発戦略を自由に決められること
    * この戦略は、トップダウン方式と呼ばれる
    * チームが同時並行で依存インターフェイスを開発可能

### スタブとモックをできる限り少なくするアプローチ

* テストの一部としてセットアップ、実行するのが本当に不便、低速、複雑な依存ファイルだけをフェイクにする
* 動的に型付けされる言語では、スタブとモックには代償がある
    * 本番環境のオブジェクトと互換性のないフェイクをテストで使ってしまう可能性がある
        * テストダブルのインターフェイスを実用的な形で強制できないため
        * そのようなフェイクでテストを成功させても、統合テストで本物の実装とともに使ったときには間違いなく動作しない

### 選択する

* `ajax.request`の開発時は、スタブに置き換える場所について選択の余地はなかった
    * `ajax.request`は、`ajax.create()`を介して`XMLHttpRequest`オブジェクトに依存していただけだった
