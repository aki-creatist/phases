# セキュリティ

* [Webシステムのセキュリティを取り巻く現状](01)
* [HTTPのおさらい](02)
* [webアプリケーションにおける認証の役割](03)
* [HTTPの機能](04)
* [攻撃手法](05)
* [インフラ対策](06)
* [システム開発のライフサイクルとセキュリティ](07)

## セキュリティ要件を検討するためのチェックリスト

* Webシステム開発では要件定義・基本設計の段階からセキュリティ要件を検討する必要がある
* 開発の後半やテスト段階になってからのセキュリティ要件の「漏れ」は、手戻りとなって時間的、費用的に大きなロスをもたらす

### セッション管理

#### 概要

* Webシステムにおいてユーザのセッションを特定するためには、アプリケーションで「セッション管理」を実装する必要がある
* 一般的には、セッションの識別子である「セッションID」をCookie(ユーザーのPC上に一般的にデータを保存しておくための仕組み)を使って管理する

#### チェック

* Webシステムを利用する機器としてCookieが使えない端末を想定するか
* セッションIDの発行方式(言語やフレームワークの方式を確認する)
* セッションIDの発行と管理の方式(Cookieを使う、認証ごとにセッションIDを再発行するなど)
* セッションIDの有効期間(サーバー上でのタイムアウト時間)
* Cookieの保存期間(Webブラウザー終了後もCookie認証状態を維持するかどうか)

### 認証

#### 概要

* Webシステムにおいてユーザー本人確認を行うのが「認証」機能
* 一般的にはユーザーIDとパスワードを使いますが、最近はパスワード以外の認証要素も利用する「多機能認証」が普及している
* Webシステムによってはリスト型アカウントハッキングやCSRFと言った攻撃への対策も必要な場合がある

#### チェック

* ユーザーIDやパスワードの強度(桁数、複雑℃、有効期間など)
* 認証にパスワード以外の要素(多要素認証)を用いるかどうか
* サーバーにおけるパスワード保存時の要件(ソルトやハッシュ)
* 新規ユーザー登録時の本人確認要件(メール送信による本人確認を実施するかどうか)
* パスワード強度判定機能の実装が必要かどうか
* パスワードを忘れた場合の対応(パスワードリマインダの実装)
* アカウントロックアウトの仕様
* リスト型アカウントハッキングへの対策
* CSRF対策が必要な箇所と実装方針
* (端末認証が必要な場合)端末認証の方針
* (アプリケーション認証が必要な場合)アプリケーション認証の方式

### HTTPSの利用

#### 概要

* WebブラウザーとWebサーバー間の通信を暗号化する際、HTTPSを利用する
* WebサーバーでHTTPSを利用するには、サーバー証明書を認証機関から購入する
* サーバー証明書は用途によって種類が異なるため、どの証明書が必要かを検討する
* 従来は、認証や個人情報の登録が必要な箇所だけをHTTPSにする設計が主流だった
    * 最近は、Webサイト全体をHTTPSで保護するケースが増えている
* HTTPSの必要な箇所と方針について検討する必要がある

#### チェック

* HTTPSが必要な箇所と実装方針
* 利用するサーバー証明書の種類

### SQLインジェクションやXSS対策

#### 概要

* SQLインジェクションやXSSについては実装フェーズで対策する
* 要件定義・基本設計の段階で実装方針については確認してく
* 入力チェックとエラー処理の方針では、入力チェックでエラーになった場合に、システムエラーとするか、不正な文字列を除去して処理を継続するかを検討する

#### チェック

* SQLインジェクション対策の実装方針(プレースホルダ方式)
* XSS対策の実装方針
* その他のインジェクション系脆弱性への対応方針
* 入力チェックとエラー処理の実装方針

### ネットワークやインフラ

#### 概要

* ファイアウォールやIDS(またはIPS)、WAFを採用するかどうかを検討する

#### チェック

* ファイアウォール、IDS(またはIPS)、WAFの有無
* 採用するソフトウェア、ミドルウェアの選定基準
* SSLアクセラレータや負荷分散装置の利用の有無

### セキュリティテスト

#### 概要

* Webシステムのリリース前に、外部のセキュリティ専門会社が実施する「セキュリティ診断」を利用するケースが増加
* セキュリティ診断
    * Webサーバーなどのプラットフォームの設定を検査するもの
    * Webアプリケーションのセキュリティ対策を検査するものがあります。
        * 画面数やパラメータの数によって費用が変動する場合一般的
        * セキュリティ診断の費用見積りは、要件定義の段階での正確な費用産出が難しい

#### チェック

* ファイアウォールやIDS(またはIPS)、WAFの運用監視
* ソフトウェアのパッチアップデートに関する方針
* セキュリティの観点から必要な「ログ」に関する検討
