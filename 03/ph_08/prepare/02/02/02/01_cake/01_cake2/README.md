# CakePHP2.x

```bash
cd プロジェクト
app/Console/cake bake
```

## Modelの自動生成

* [モデルの作成](bake_model.txt)
* **MeetingsMember**のみ`displayField`について聞かれる
    * なぜ他のテーブルでは聞かれないのか
        * `name`か`title`という項目があると、CakePHPは自動的にその項目を表示項目とみなすため
    * 表示項目に該当する項目が明白であれば`y`を選択
    * 特にそのような項目がない場合には`n`を選択

## Controllerの自動生成

* [コントローラの作成](bake_controller.txt)
* モデルの自動生成の際に一緒に作られた`fixture`は作られない
    * `fixture`はモデルのテストデータを管理するのでコントローラでは使用しないため
* **MeetingsMembersは作成不要**
* 画面に表示するメッセージをセッション経由で表示するかで`y`を選択する意味
    * 例: 更新処理が終わった後、`CakePHP`の標準的な動作は次の画面にリダイレクトする
        * ブラウザバック時の二重更新の回避や、更新処理の後ろにわざわざ検索処理を実装しなくて済むようになっている
    * もしこの機構を採用するのであれば、完了後の画面表示はリダイレクト先の機能で行うため、よくある`更新できました`といったメッセージは表示不可
    * そこで、更新完了時にセッションに`更新できました`メッセージを記録しておき、リダイレクト先でそのメッセージを読み込んで画面に表示する

## Viewの自動生成

* [ビューの作成](bake_view.txt)
* 今回は`テストファイル`が作られていない
    * `ビュー`のテストコードは`コントローラ`のテストクラスの中に書くため、`ビュー専用`のテストファイルは作らない

### 早速動かして見る

* アクセスして動作確認
* http://localhost/meeting_rooms
* 会議室一覧が表示される
* すでに基本的なCRUDは動くようになっている

### 動作確認

* 例: 左側の`New Meeting Room`(会議室登録)をクリック！
    * http://localhost/meeting_rooms/add
    * 会議室名を入力して`Submit`をクリックすれば、テストデータの登録も可能
    
